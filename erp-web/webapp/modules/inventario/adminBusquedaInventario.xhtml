<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	template="/templates/pages/pageLayout2.xhtml">
	
	<ui:param name="idForm" value="frmAdminBusquedaInvent" />
	<ui:param name="form" value="#{inventarioController.form}" />	
	<ui:param name="controller" value="#{inventarioController}" />
	<ui:param name="westLength" value="250" />
	
	<ui:define name="title">
		Modulos
	</ui:define>
	
	<ui:define name="header">	
		<ui:include src="adminBusquedaInventarioHeader.xhtml" />
	</ui:define>
	
	<ui:define name="contentLeft">
		<ui:include src="adminBusquedaInventarioLeft.xhtml" />
	</ui:define>
	
	<ui:define name="contentCenter">
		<rich:panel id="listaInventario" styleClass="panelListaArticulos" header="#{msg_erpweb['ec.com.erp.etiqueta.titulo.lista.modulos']}" style="height: 94.5%; width:100% !important;">	
			<h:panelGrid id="tablaVacia" columns="1" rendered="#{empty inventarioController.inventarioDTOCols}" style="width:100%; text-align: center; padding-top: 220px">
				<h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.mensaje.lista.vacio']}"/>
			</h:panelGrid>
			<rich:panel style="text-align:center; border-left: none; border-right:none; border-bottom:none" rendered="#{not empty inventarioController.inventarioDTOCols}">
				<rich:dataScroller page="#{inventarioController.page}" fastStep="3" for="tableInventario" maxPages="5" rendered="#{not empty inventarioController.inventarioDTOCols}" renderIfSinglePage="false"/>
			</rich:panel>	
				
			 <rich:dataTable style="width:100%" rendered="#{not empty inventarioController.inventarioDTOCols}" value="#{inventarioController.inventarioDTOCols}" var="inventario" iterationStatusVar="it" id="tableInventario" rows="15">
			 	<f:facet name="header">
		            <rich:columnGroup>
		                <rich:column rowspan="2">
		                	<h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.fecha']}"/>
		                </rich:column>
		                <rich:column rowspan="2">
		                	<h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.detalle']}"/>
		                </rich:column>
		                <rich:column colspan="3">
		                    <h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.entradas']}"/>
		                </rich:column>
		                <rich:column colspan="3">
		                    <h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.salidas']}"/>
		                </rich:column>
		                <rich:column colspan="3">
		                    <h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.existencias']}"/>
		                </rich:column>
		                <rich:column rowspan="2">
		                	<h:outputText value="Editar"/>
		                </rich:column>
		                <rich:column breakRowBefore="true">
		                    <h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.cantidad']}"/>
		                </rich:column>
		                <rich:column>
		                    <h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.valorunidad']}"/>
		                </rich:column>
		                <rich:column>
		                    <h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.valortotal']}"/>
		                </rich:column>
		                <rich:column>
		                    <h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.cantidad']}"/>
		                </rich:column>
		                <rich:column>
		                    <h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.valorunidad']}"/>
		                </rich:column>
		                <rich:column>
		                    <h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.valortotal']}"/>
		                </rich:column>
		                <rich:column>
		                    <h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.cantidad']}"/>
		                </rich:column>
		                <rich:column>
		                    <h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.valorunidad']}"/>
		                </rich:column>
		                <rich:column>
		                    <h:outputText value="#{msg_erpweb['ec.com.erp.etiqueta.inventario.label.header.valortotal']}"/>
		                </rich:column>
		            </rich:columnGroup>
		        </f:facet>
	            <rich:column>
	                <h:outputText value="#{inventario.fechaMovimiento}" />
	            </rich:column>
	            <rich:column>
	                <h:outputText value="#{inventario.detalleMoviento}" />
	            </rich:column>
	            <rich:column>
	                <h:outputText value="#{inventario.cantidadEntrada}" />
	            </rich:column>
	            <rich:column>
	                <h:outputText value="#{inventario.valorUnidadEntrada}" />
	            </rich:column>
	            <rich:column>
	                <h:outputText value="#{inventario.valorTotalEntrada}" />
	            </rich:column>
	            <rich:column>
	                <h:outputText value="#{inventario.cantidadSalida}" />
	            </rich:column>
	            <rich:column>
	                <h:outputText value="#{inventario.valorUnidadSalida}" />
	            </rich:column>
	            <rich:column>
	                <h:outputText value="#{inventario.valorTotalSalida}" />
	            </rich:column>
	            <rich:column>
	                <h:outputText value="#{inventario.cantidadExistencia}" />
	            </rich:column>
	            <rich:column>
	                <h:outputText value="#{inventario.valorUnidadExistencia}" />
	            </rich:column>
	            <rich:column>
	                <h:outputText value="#{inventario.valorTotalExistencia}" />
	            </rich:column>
	            <rich:column styleClass="columna10">
	                <a4j:commandLink id="botonEditar" render="pnlGridModulos" action="#{inventarioController.cargarInventario}"	execute="@this" >
						<h:graphicImage name="btnEditar.png" library="images" style="border:none;border-color:white;" height="16" width="16"/>
						<f:setPropertyActionListener value="#{inventario}" target="#{inventarioController.inventarioDTO}" />											
					</a4j:commandLink>	
	            </rich:column>
	        </rich:dataTable>
        </rich:panel>
        <script>
			/*<![CDATA[*/
			$(document).ready(function(){				
				 openLinkSystem();				
			});
			function openLinkSystem(){
				$('.linkopensystem').trigger('click');
			}	
								
		/*]]>*/			
		</script>
		<h:outputStylesheet>
			.columna1{
				width: 1% !important;
			}	
			.columna9 {
				width: 9% !important;
			}
			.columna10 {
				width: 5% !important;
				text-align: center !important;
			}
		</h:outputStylesheet>
		<a4j:commandLink id="linkopensystem" styleClass="linkopensystem" execute="@this" actionListener="#{inventarioController.refrescarPantalla}">
		</a4j:commandLink>	
	</ui:define>
	
</ui:composition>